{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/necdet/Desktop/React/yemek-tarifleri/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/necdet/Desktop/React/yemek-tarifleri/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/necdet/Desktop/React/yemek-tarifleri/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/necdet/Desktop/React/yemek-tarifleri/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";var useFetch=function useFetch(url){var method=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"GET\";var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),options=_useState8[0],setOptions=_useState8[1];var postData=function postData(data){setOptions({method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)});};useEffect(function(){//promise\n// fetch(url)\n// .then(res => res.json())\n// .then(data => setData(data))\n//async - await\nvar fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(options){var res,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return fetch(url,_objectSpread({},options));case 4:res=_context.sent;if(res.ok){_context.next=7;break;}throw new Error(res.statusText);case 7:_context.next=9;return res.json();case 9:_data=_context.sent;setIsLoading(false);setData(_data);// buradaki data ile usetState' e tanımlanan data aynı değil\n_context.next=19;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);setIsLoading(false);setError(_context.t0.message);console.log(_context.t0.message);case 19:case\"end\":return _context.stop();}},_callee,null,[[1,14]]);}));return function fetchData(_x){return _ref.apply(this,arguments);};}();if(method===\"GET\"){fetchData();}if(method===\"POST\"&&options){fetchData(options);}},[url,options,method]);return{data:data,isLoading:isLoading,error:error,postData:postData};};export default useFetch;","map":{"version":3,"names":["useState","useEffect","useFetch","url","method","arguments","length","undefined","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","error","setError","_useState5","_useState6","isLoading","setIsLoading","_useState7","_useState8","options","setOptions","postData","headers","body","JSON","stringify","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","_data","wrap","_callee$","_context","prev","next","fetch","_objectSpread","sent","ok","Error","statusText","json","t0","message","console","log","stop","_x","apply"],"sources":["C:/Users/necdet/Desktop/React/yemek-tarifleri/src/hooks/useFetch.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nconst useFetch = (url, method=\"GET\") => {\r\n    const [data, setData] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [options, setOptions] = useState(null)\r\n\r\n    const postData = (data) => {\r\n        setOptions({\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        //promise\r\n        // fetch(url)\r\n        // .then(res => res.json())\r\n        // .then(data => setData(data))\r\n\r\n        //async - await\r\n        const fetchData = async (options) => {\r\n            setIsLoading(true);\r\n\r\n            try {\r\n                const res = await fetch(url, {...options});\r\n                if(!res.ok){\r\n                    throw new Error(res.statusText);\r\n                }\r\n                const data = await res.json();\r\n                setIsLoading(false);\r\n                setData(data); // buradaki data ile usetState' e tanımlanan data aynı değil\r\n            }\r\n            catch(err) {\r\n                setIsLoading(false);\r\n                setError(err.message);\r\n                console.log(err.message);\r\n            }\r\n        }\r\n\r\n        if(method === \"GET\") {\r\n            fetchData();\r\n        }\r\n\r\n        if(method === \"POST\" && options) {\r\n            fetchData(options);\r\n        }\r\n\r\n\r\n    }, [url, options, method])\r\n\r\n    return {\r\n        data, isLoading, error, postData\r\n    }\r\n}\r\n\r\nexport default useFetch;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}